library(ngram)
library(stringr)
library(NLP)
library(RColorBrewer)
library(wordcloud2)
library(tm)
library(plotly)
library(ggplot2)
library(tidyverse)
setwd("~/final/en_US")
blogs<-readLines("en_US.blogs.txt")
news<-readLines("en_US.news.txt")
tweets<-readLines("en_US.twitter.txt")
b_words<-readLines("facebook-bad-words-list_comma-separated-text-file_2018_07_29.txt")
b_words<-b_words[2]
b_words<-strsplit(b_words,",")
b_words<-lapply(b_words, str_trim)
b_words<-b_words[[1]]
t_all<-c(blogs,news,tweets)
remove(blogs)
remove(news)
remove(tweets)
len<-length(t_all)
t_all<-sample(t_all,0.2*len)
t_all<-lapply(t_all,tolower)
t_all<-as.String(t_all)
t_all<-as.character(t_all)
t_all<-removeNumbers(t_all)
t_all<-str_replace_all(t_all,"[^\'[a-z]]"," ")
t_all<-removeWords(t_all,b_words)
remove(b_words)
ng<-ngram(t_all,2)
df2<-get.phrasetable(ng)
#df2<-filter(df2,freq>1)
remove(ng)
ngrams2<-df2$ngrams
saveRDS(ngrams2,"ngrams2.rds")
remove(ngrams2)
ng<-ngram(t_all,3)
df2<-get.phrasetable(ng)
remove(ng)
#df2<-filter(df2,freq>1)
ngrams3<-df2$ngrams
saveRDS(ngrams3,"ngrams3.rds")
remove(ngrams3)
ng<-ngram(t_all,4)
df2<-get.phrasetable(ng)
remove(ng)
#df2<-filter(df2,freq>1)
ngrams4<-df2$ngrams
saveRDS(ngrams4,"ngrams4.rds")
remove(ngrams4)
ng<-ngram(t_all,5)
df2<-get.phrasetable(ng)
remove(ng)
#df2<-filter(df2,freq>1)
ngrams5<-df2$ngrams
saveRDS(ngrams5,"ngrams5.rds")
remove(ngrams5)

